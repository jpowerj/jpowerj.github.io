---
import { cn } from '@/utils/class-merge'

const {
  as: Tag = 'div',
  detailed = false,
  class: className,
  url,
  title,
  description,
  venue
} = Astro.props
---

<a
  class={cn(
    'group/link w-full flex flex-col transition-all',
    (url != "") && 'hover:text-primary',
    !detailed && 'sm:flex-row'
  )}
  href={url != "" ? url : null}
  target="_blank"
>
  <li
    class={cn(
      'post-preview group/card flex flex-col relative rounded-2xl border bg-muted transition-colors ease-in-out px-5 py-3',
      (url != "") && 'hover:bg-background',
      detailed && 'max-sm:px-4 sm:py-3',
      className
    )}
  >
    <Tag class='z-10 flex-grow'>
      {/* title */}
      <div class='flex justify-between'>
        <h2 class='text-lg font-medium'>
          {title}
        </h2>
        { (url != "") &&
        <svg
          xmlns='http://www.w3.org/2000/svg'
          width='16'
          height='16'
          viewBox='0 0 24 24'
          fill='none'
          stroke-width='2.5'
          stroke-linecap='round'
          stroke-linejoin='round'
          class='preview-redirect my-1 stroke-muted-foreground group-hover/link:stroke-primary'
          ><line
            x1='5'
            y1='12'
            x2='19'
            y2='12'
            class='translate-x-4 scale-x-0 transition-all duration-300 ease-in-out group-hover/link:translate-x-1 group-hover/link:scale-x-100'
          ></line><polyline
            points='12 5 19 12 12 19'
            class='translate-x-0 transition-all duration-300 ease-in-out group-hover/link:translate-x-1'
          ></polyline></svg
        >
        }
      </div>
      {
        detailed && (
          <>
            {/* desc */}
            <p
              class={cn(
                'line-clamp-2 pt-1 text-md text-muted-foreground sm:line-clamp-3'
              )}
            >
              {description}
            </p>
            <p
              class={cn(
                'line-clamp-2 pt-0 text-md font-italic text-muted-foreground sm:line-clamp-3'
              )}
            >
              {venue}
            </p>
          </>
        )
      }
    </Tag>
  </li>
</a>

<style>
</style>
